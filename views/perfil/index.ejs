<% const pageTitle = 'Meu Perfil'; %>
<%- include('../partials/layout-start', { title: pageTitle }) %>

<div class="max-w-4xl mx-auto">
    <% if (perfil) { %>
    <!-- Perfil Existente -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <!-- Header com foto -->
        <div class="bg-gradient-to-r from-primary-600 to-primary-700 px-6 py-8">
            <div class="flex items-center gap-6">
                <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center text-3xl font-bold text-primary-600">
                    <%= perfil.nome_completo ? perfil.nome_completo.split(' ').map(function(n) { return n[0]; }).slice(0, 2).join('') : 'BR' %>
                </div>
                <div class="text-white">
                    <h2 class="text-2xl font-bold"><%= perfil.nome_completo || 'Nome não informado' %></h2>
                    <p class="text-primary-200 mt-1"><%= perfil.localizacao || 'Localização não informada' %></p>
                </div>
            </div>
        </div>

        <!-- Informações -->
        <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h3 class="text-sm font-medium text-gray-500 mb-1">Email</h3>
                <p class="text-gray-800"><%= perfil.email || 'Não informado' %></p>
            </div>
            <div>
                <h3 class="text-sm font-medium text-gray-500 mb-1">Telefone</h3>
                <p class="text-gray-800"><%= perfil.telefone || 'Não informado' %></p>
            </div>
            <div>
                <h3 class="text-sm font-medium text-gray-500 mb-1">LinkedIn</h3>
                <% if (perfil.linkedin) { %>
                    <a href="<%= perfil.linkedin %>" target="_blank" class="text-primary-600 hover:underline"><%= perfil.linkedin %></a>
                <% } else { %>
                    <p class="text-gray-800">Não informado</p>
                <% } %>
            </div>
            <div>
                <h3 class="text-sm font-medium text-gray-500 mb-1">GitHub</h3>
                <% if (perfil.github) { %>
                    <a href="<%= perfil.github %>" target="_blank" class="text-primary-600 hover:underline"><%= perfil.github %></a>
                <% } else { %>
                    <p class="text-gray-800">Não informado</p>
                <% } %>
            </div>
            <div>
                <h3 class="text-sm font-medium text-gray-500 mb-1">Data de Nascimento</h3>
                <p class="text-gray-800"><%= perfil.data_nascimento ? new Date(perfil.data_nascimento).toLocaleDateString('pt-BR') : 'Não informado' %></p>
            </div>
        </div>

        <!-- Resumo -->
        <div class="px-6 pb-6">
            <h3 class="text-sm font-medium text-gray-500 mb-2">Resumo Profissional</h3>
            <p class="text-gray-700 leading-relaxed bg-gray-50 p-4 rounded-lg"><%= perfil.resumo_base || 'Resumo não informado' %></p>
        </div>

        <!-- Ações -->
        <div class="px-6 pb-6 flex justify-end">
            <a href="/perfil/form" class="px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
                Editar Perfil
            </a>
        </div>
    </div>
    <% } else { %>
    <!-- Sem Perfil -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center">
        <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">Perfil não cadastrado</h3>
        <p class="text-gray-500 mb-6">Configure seu perfil para começar a gerar currículos otimizados.</p>
        <a href="/perfil/form" class="inline-block px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
            Criar Perfil
        </a>
    </div>
    <% } %>
</div>

<%- include('../partials/layout-end') %>
